<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="./resources/semantic.css">
		<link rel="stylesheet" type="text/css" href="./resources/cola.css">
		<link rel="stylesheet" type="text/css" href="./css/goodsDistribution.css"/>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" style="background-color: #439CF6;">
		    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" style="color: white;"></a>
		    <h1 class="mui-title" style="color: white;">工厂入库情况跟踪</h1>
		</header>
		<div class="v-box">
			<div class="box" style="height: 100%;">
				<div id="item1" class="mui-control-content mui-active">
					<div class="v-box" id="inputFrom">
						<!--<label>工厂：<c-input id="queryInput" bind="queryData.styleCode" c-widget="width:80%" style="margin-top: 20%;"></c-input></label>-->
						<div class="box">
							<label>品牌：</label><c-dropdown id="queryInput" c-bind="queryData.brand" items="{{band}}"  openmode="drop" valueProperty="enumvCode" textProperty="enumvName" c-widget="width:80%" style="margin-top: 20%;"></c-dropdown>
						</div>
						<div class="box">
							<label>年份：</label><c-dropdown id="queryInput" dblclick="dblclick" c-bind="queryData.years" items="{{years}}"  openmode="drop"  valueProperty="year" textProperty="year" c-widget="width:80%"></c-dropdown>
						</div>
						<div class="box">
							<label>季节：</label><c-dropdown id="queryInput" c-bind="queryData.season" items="{{seasons}}"  openmode="drop"  valueProperty="enumvCode" textProperty="enumvName" c-widget="width:80%"></c-dropdown>
						</div>
						<div class="box">
							<label>波段：</label><c-dropdown id="queryInput" c-bind="queryData.band" items="{{waves}}"  openmode="drop"  valueProperty="enumvCode" textProperty="enumvName" c-widget="width:80%"></c-dropdown>
						</div>
						<div class="box">
							<label>起时：</label><c-datePicker id="queryInput" readOnly="true"  c-widget="width:80%;inputFormat:MM-dd;bind:queryData.deliveryDateS"></c-datePicker>
						</div>
						<div class="box"> 
							<label>止时：</label><c-datePicker id="queryInput" readOnly="true" c-widget="width:80%;inputFormat:MM-dd;bind:queryData.deliveryDateE"></c-datePicker>
						</div>
						<div class="box" style="margin-top: 10%;">
							<c-button size="small" color="blue" c-widget="caption:查询;width:90%;click:query" style="margin-left: 5%;"></c-button>
							<c-button size="small" c-widget="caption:重置;width:90%;click:resetQuery" style="margin-left: 5%;margin-top: 10%;"></c-button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="./resources/jquery-2.1.3.js"></script> 
		<script src="./resources/3rd.js"></script>
		<script src="./resources/semantic.js"></script>
		<script src="./js/cola.js"></script>
		<script src="./resources/i18n/zh/cola.js"></script>
		<script src="./js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init()
			
			cola(function(model){
				
				var years = [];
				var today = new Date();
			        for (var row = today.getFullYear() - 5; row <= today.getFullYear() + 5; row++) {
			            var item = {
			                year: row+""
			            };
			            years.push(item);
			        }
			        years.push({year:"请选择"});
			        model.set("years", years);
				
				model.set({
					queryData:{}
				});
				
				model.describe("band",{
					provider:{
						method:"POST",
						url:localStorage.getItem("localhost")+"/scmmk/rest/mobile/enum/Brand/list",
						success:function(arg){
							model.set("band",arg.result.dataList);
							model.get("band").insert({"enumvName":"请选择","enumvCode":""}); 
							model.get("queryData").set("brand","");
							model.get("queryData").set("years","请选择");
						}
					}
				});
				model.describe("seasons",{
					provider:{
						method:"POST",
						url:localStorage.getItem("localhost")+"/scmmk/rest/mobile/enum/Season/list",
						success:function(arg){
							model.set("seasons",arg.result.dataList);
							model.get("seasons").insert({"enumvName":"请选择","enumvCode":""});
							model.get("queryData").set("season","");
						}
					}
				});
				model.describe("waves",{
					provider:{
						method:"POST",
						url:localStorage.getItem("localhost")+"/scmmk/rest/mobile/enum/Wave/list",
						success:function(arg){
							model.set("waves",arg.result.dataList);
							model.get("waves").insert({"enumvName":"请选择","enumvCode":""})
							model.get("queryData").set("band","")
						}
					}
				});
				
				model.action({
					query:function(){//查询
						var param = {};
						if(model.get("queryData").get("brand")){
							param["brand"] = model.get("queryData").get("brand");
						}
						if(model.get("queryData").get("years") && !(model.get("queryData").get("years") == "请选择")){
							param["years"] = model.get("queryData").get("years");
						}
						if(model.get("queryData").get("season")){
							param["season"] = model.get("queryData").get("season");
						}
						if(model.get("queryData").get("band")){
							param["band"] = model.get("queryData").get("band");
						}
						if(model.get("queryData").get("deliveryDateS")){
							param["deliveryDateS"] = model.get("queryData").get("deliveryDateS");
						}
						if(model.get("queryData").get("deliveryDateE")){
							param["deliveryDateE"] = model.get("queryData").get("deliveryDateE");
						}
						
						console.log(JSON.stringify(param))
						 mui.openWindow({
						    url: 'sku-storageTranceQuery.html', 
						    id:'storageTranceQuery',
						    extras:{
						        queryData:param,//扩展参数
						    }
						 }); 
					},
					resetQuery:function(){//重置查询条件
						model.set("queryData",{});
					},
					dblclick:function(){
						alert(1111)
					}
				});
			})
		</script>
	</body>

</html>