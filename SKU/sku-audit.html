<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="./resources/semantic.css">
		<link rel="stylesheet" type="text/css" href="./resources/cola.css">
		<link rel="stylesheet" type="text/css" href="css/audit.css"/>
	</head>

	<body>
		
		<header class="mui-bar mui-bar-nav" style="background-color: #439CF6;">
		    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" style="color: white;"></a>
		    <h1 class="mui-title" style="color: white;">交货单审批</h1>
		</header>
		<div class="v-box">
			<div class="h-box">
				<div class="v-box" style="width: 90%;text-align: right;padding-top: 10%;">
					<div class="box">
						<label>交货单状态：</label><c-dropdown c-bind="queryData.receiptStatus" id="formInput" items="{{DelOrderStatus}}"  openmode="drop"  valueProperty="enumvCode" textProperty="enumvName" c-widget="width:65%"></c-dropdown>
					</div>
					<div class="box">
						<label>交货单编号：</label><c-input c-bind="queryData.receiptCode" id="formInput" c-widget="width:65%"></c-input>
					</div>
					<div class="box">
						<label>生产订单号：</label><c-input c-bind="queryData.productionOrderCode" id="formInput" c-widget="width:65%"></c-input>
					</div>
					<div class="box">
						<label>采购订单编号：</label><c-input c-bind="queryData.poCode" id="formInput" c-widget="width:65%"></c-input>
					</div>
					<div class="box">
						<label>款号：</label><c-input c-bind="queryData.style" id="formInput" c-widget="width:65%"></c-input>
					</div>
				</div>
			</div>
			<div class="box" style="margin-top: 5em;">
				<c-button  color="blue" c-widget="caption:查询;width:80%;" click="query" style="margin-left: 10%;"></c-button>
				<c-button  c-widget="caption:重置;width:80%;" click="dataBack" style="margin-left: 10%;margin-top: 2em;"></c-button>
			</div>
		</div>
		
		<script src="./resources/jquery-2.1.3.js"></script> 
		<script src="./resources/3rd.js"></script>
		<script src="./resources/semantic.js"></script>
		<script src="./js/cola.js"></script>
		<script src="./resources/i18n/zh/cola.js"></script>
		<script src="./js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init();
			cola(function(model){
				
				$.ajax({
						type: "POST",
						contentType:'application/json;charset=UTF-8',
						url: localStorage.getItem("localhost")+"/scmmk/rest/mobile/enum/StorageWay/list",
						//提交的数据
						//返回数据的格式
						datatype: "json", //"xml", "html", "script", "json", "jsonp", "text".
						success: function(data) {
							model.set("StorageWay",data.dataList);
						},
						//调用出错执行的函数
						error: function(e) {
							//请求出错处理
						}
					});
				$.ajax({
						type: "POST",
						contentType:'application/json;charset=UTF-8',
						url: localStorage.getItem("localhost")+"/scmmk/rest/mobile/enum/DelOrderStatus/list",
						//提交的数据
						//返回数据的格式
						datatype: "json", //"xml", "html", "script", "json", "jsonp", "text".
						success: function(data) {
							model.set("DelOrderStatus",data.dataList);
							model.get("queryData").set("receiptStatus","01");
						},
						//调用出错执行的函数
						error: function(e) {
							//请求出错处理
						}
					});
				
				model.set({
					queryData:{
						style:"716301027003"
					}
				});
				
				model.action({
					dataBack:function(){
						model.set("queryData",{receiptStatus:"01"});  
					},
					query:function(){
						if(!model.get("queryData").get("style")){
							mui.toast('款号不能为空',{ duration:'short', type:'div' });
							return;
						}
						mui.openWindow({
						    url: 'sku-queryAudit.html', 
						    id:'queryAudit',
						    extras:{
						        queryData:model.get("queryData").toJSON(),  //扩展参数
						        StorageWay:model.get("StorageWay"),
						        DelOrderStatus:model.get("DelOrderStatus")
						    }
						 }); 
					}
				});
				
			});
		</script>
	</body>

</html>